{"ast":null,"code":"var _jsxFileName = \"/Users/emiliamamedova/flight-1/src/components/Dashboard/Dashboard.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { Bar, Doughnut, Pie } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, ArcElement, Title, Tooltip, Legend, PointElement, LineElement } from 'chart.js';\nimport './Dashboard.css'; // Регистрируем компоненты Chart.js\n\nChartJS.register(CategoryScale, LinearScale, BarElement, ArcElement, PointElement, LineElement, Title, Tooltip, Legend);\n\nconst Dashboard = () => {\n  var _flightDirections$, _flightDirections$2;\n\n  // Состояния для данных\n  const [topAirlines, setTopAirlines] = useState([]);\n  const [airlinePunctuality, setAirlinePunctuality] = useState([]);\n  const [airports, setAirports] = useState([]);\n  const [delayHistogram, setDelayHistogram] = useState({});\n  const [cancellations, setCancellations] = useState([]);\n  const [delayRules, setDelayRules] = useState([]);\n  const [flightDirections, setFlightDirections] = useState([]); // Состояния для загрузки и фильтров\n\n  const [loading, setLoading] = useState(true);\n  const [minFlights, setMinFlights] = useState(0);\n  const [activeTab, setActiveTab] = useState('overview'); // Загрузка данных при монтировании\n\n  useEffect(() => {\n    loadAllData();\n  }, []);\n\n  const loadAllData = async () => {\n    try {\n      setLoading(true); // Загружаем данные параллельно\n\n      const [topResponse, punctualityResponse, airportsResponse, histogramResponse, cancellationsResponse, rulesResponse, directionsResponse] = await Promise.all([fetch('/api/get_top3'), fetch('/api/get_airline_punctuality'), fetch('/api/get_airports'), fetch('/api/delay_histogram'), fetch('/api/cancellations_distribution'), fetch('/api/delay-rules/top?top_n=10'), fetch('/api/get_all_direction')]);\n      const topData = await topResponse.json();\n      const punctualityData = await punctualityResponse.json();\n      const airportsData = await airportsResponse.json();\n      const histogramData = await histogramResponse.json();\n      const cancellationsData = await cancellationsResponse.json();\n      const rulesData = await rulesResponse.json();\n      const directionsData = await directionsResponse.json();\n      setTopAirlines(topData);\n      setAirlinePunctuality(punctualityData);\n      setAirports(airportsData);\n      setDelayHistogram(histogramData[0] || {});\n      setCancellations(cancellationsData);\n      setDelayRules(rulesData);\n      setFlightDirections(directionsData);\n    } catch (error) {\n      console.error('Error loading data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const refreshRules = async () => {\n    try {\n      await fetch('/api/delay-rules/refresh', {\n        method: 'POST'\n      });\n      alert('Анализ правил запущен. Обновите страницу через несколько минут.');\n    } catch (error) {\n      console.error('Error refreshing rules:', error);\n    }\n  }; // Подготовка данных для графиков\n\n\n  const topAirlinesChartData = {\n    labels: topAirlines.map(airline => airline.airline_name),\n    datasets: [{\n      label: 'Рейтинг отправления',\n      data: topAirlines.map(airline => airline.rating_departure),\n      backgroundColor: 'rgba(54, 162, 235, 0.6)',\n      borderColor: 'rgba(54, 162, 235, 1)',\n      borderWidth: 1\n    }, {\n      label: 'Рейтинг прибытия',\n      data: topAirlines.map(airline => airline.rating_arrival),\n      backgroundColor: 'rgba(75, 192, 192, 0.6)',\n      borderColor: 'rgba(75, 192, 192, 1)',\n      borderWidth: 1\n    }]\n  };\n  const delayHistogramChartData = {\n    labels: ['0-10 минут', '11-20 минут', '21-30 минут', '31-120 минут', '>120 минут'],\n    datasets: [{\n      label: 'Количество задержек',\n      data: [delayHistogram['0-10 минут'] || 0, delayHistogram['11-20 минут'] || 0, delayHistogram['21-30 минут'] || 0, delayHistogram['31-120 минут'] || 0, delayHistogram['>120 минут'] || 0],\n      backgroundColor: ['rgba(75, 192, 192, 0.6)', 'rgba(54, 162, 235, 0.6)', 'rgba(255, 206, 86, 0.6)', 'rgba(255, 159, 64, 0.6)', 'rgba(255, 99, 132, 0.6)'],\n      borderColor: ['rgba(75, 192, 192, 1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(255, 159, 64, 1)', 'rgba(255, 99, 132, 1)'],\n      borderWidth: 1\n    }]\n  };\n  const cancellationsChartData = {\n    labels: cancellations.slice(0, 10).map(item => item.airlines),\n    datasets: [{\n      label: 'Количество отмен',\n      data: cancellations.slice(0, 10).map(item => item.cancellations),\n      backgroundColor: 'rgba(255, 99, 132, 0.6)',\n      borderColor: 'rgba(255, 99, 132, 1)',\n      borderWidth: 1\n    }]\n  }; // Фильтрация данных по количеству рейсов\n\n  const filteredPunctuality = airlinePunctuality.filter(item => item['Количество рейсов'] >= minFlights);\n  const punctualityChartData = {\n    labels: filteredPunctuality.map(item => item.Авиакомпания),\n    datasets: [{\n      label: 'Пунктуальность отправления (%)',\n      data: filteredPunctuality.map(item => item.Отправление),\n      backgroundColor: 'rgba(54, 162, 235, 0.6)'\n    }, {\n      label: 'Пунктуальность прибытия (%)',\n      data: filteredPunctuality.map(item => item.Прибытие),\n      backgroundColor: 'rgba(75, 192, 192, 0.6)'\n    }]\n  };\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 12\n      }\n    }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445...\");\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: \"dashboard-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  }, \"\\uD83D\\uDCCA \\u0410\\u043D\\u0430\\u043B\\u0438\\u0442\\u0438\\u043A\\u0430 \\u043F\\u0443\\u043D\\u043A\\u0442\\u0443\\u0430\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438 \\u0430\\u0432\\u0438\\u0430\\u043A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u0439\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header-controls\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: loadAllData,\n    className: \"refresh-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 11\n    }\n  }, \"\\uD83D\\uDD04 \\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: refreshRules,\n    className: \"refresh-rules-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 11\n    }\n  }, \"\\uD83D\\uDD04 \\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u0430 \\u0437\\u0430\\u0434\\u0435\\u0440\\u0436\\u0435\\u043A\"))), /*#__PURE__*/React.createElement(\"nav\", {\n    className: \"tabs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: activeTab === 'overview' ? 'active' : '',\n    onClick: () => setActiveTab('overview'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }\n  }, \"\\u041E\\u0431\\u0437\\u043E\\u0440\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: activeTab === 'airlines' ? 'active' : '',\n    onClick: () => setActiveTab('airlines'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }\n  }, \"\\u0410\\u0432\\u0438\\u0430\\u043A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u0438\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: activeTab === 'airports' ? 'active' : '',\n    onClick: () => setActiveTab('airports'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }\n  }, \"\\u0410\\u044D\\u0440\\u043E\\u043F\\u043E\\u0440\\u0442\\u044B\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: activeTab === 'analysis' ? 'active' : '',\n    onClick: () => setActiveTab('analysis'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 9\n    }\n  }, \"\\u0410\\u043D\\u0430\\u043B\\u0438\\u0437 \\u0437\\u0430\\u0434\\u0435\\u0440\\u0436\\u0435\\u043A\")), activeTab === 'overview' && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"overview-tab\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cards-grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 15\n    }\n  }, \"\\uD83C\\uDFC6 \\u0422\\u043E\\u043F-3 \\u0430\\u0432\\u0438\\u0430\\u043A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u0438\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"top-airlines\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 15\n    }\n  }, topAirlines.map((airline, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: \"top-airline-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rank\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 21\n    }\n  }, \"#\", index + 1), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"airline-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 21\n    }\n  }, airline.airline_name), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ratings\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rating departure\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 23\n    }\n  }, \"\\u2708\\uFE0F \", airline.rating_departure.toFixed(1)), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rating arrival\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 23\n    }\n  }, \"\\uD83D\\uDEEC \", airline.rating_arrival.toFixed(1))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 15\n    }\n  }, \"\\uD83D\\uDCC8 \\u0420\\u0430\\u0441\\u043F\\u0440\\u0435\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0437\\u0430\\u0434\\u0435\\u0440\\u0436\\u0435\\u043A\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chart-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Doughnut, {\n    data: delayHistogramChartData,\n    options: {\n      responsive: true,\n      plugins: {\n        legend: {\n          position: 'bottom'\n        }\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 15\n    }\n  }, \"\\u274C \\u0422\\u043E\\u043F-10 \\u043F\\u043E \\u043E\\u0442\\u043C\\u0435\\u043D\\u0430\\u043C \\u0440\\u0435\\u0439\\u0441\\u043E\\u0432\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chart-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Bar, {\n    data: cancellationsChartData,\n    options: {\n      responsive: true,\n      plugins: {\n        legend: {\n          display: false\n        }\n      },\n      scales: {\n        x: {\n          ticks: {\n            maxRotation: 45,\n            minRotation: 45\n          }\n        }\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card full-width\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 15\n    }\n  }, \"\\uD83D\\uDCDD \\u0422\\u043E\\u043F-5 \\u043F\\u0440\\u0430\\u0432\\u0438\\u043B \\u043E \\u0437\\u0430\\u0434\\u0435\\u0440\\u0436\\u043A\\u0430\\u0445\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rules-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 15\n    }\n  }, delayRules.slice(0, 5).map((rule, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: \"rule-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rule-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 21\n    }\n  }, rule.rule), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rule-metrics\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"metric\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 23\n    }\n  }, \"\\u041F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u043A\\u0430: \", rule.support.toFixed(3)), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"metric\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 23\n    }\n  }, \"\\u0414\\u043E\\u0441\\u0442\\u043E\\u0432\\u0435\\u0440\\u043D\\u043E\\u0441\\u0442\\u044C: \", rule.confidence.toFixed(3)), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"metric\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 23\n    }\n  }, \"\\u041B\\u0438\\u0444\\u0442: \", rule.lift.toFixed(3))))))))), activeTab === 'airlines' && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"airlines-tab\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filter-controls\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 13\n    }\n  }, \"\\u041C\\u0438\\u043D\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u043E\\u0435 \\u043A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0440\\u0435\\u0439\\u0441\\u043E\\u0432 \\u0434\\u043B\\u044F \\u043E\\u0442\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F:\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"range\",\n    min: \"0\",\n    max: \"5000\",\n    value: minFlights,\n    onChange: e => setMinFlights(Number(e.target.value)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 15\n    }\n  }, minFlights))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chart-container large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Bar, {\n    data: punctualityChartData,\n    options: {\n      responsive: true,\n      plugins: {\n        legend: {\n          position: 'top'\n        }\n      },\n      scales: {\n        y: {\n          min: 0,\n          max: 100,\n          title: {\n            display: true,\n            text: 'Пунктуальность (%)'\n          }\n        },\n        x: {\n          ticks: {\n            maxRotation: 90,\n            minRotation: 45\n          }\n        }\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 13\n    }\n  }, \"\\u0414\\u0435\\u0442\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F \\u043F\\u043E \\u0430\\u0432\\u0438\\u0430\\u043A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u044F\\u043C\"), /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 19\n    }\n  }, \"\\u0410\\u0432\\u0438\\u0430\\u043A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u044F\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 19\n    }\n  }, \"\\u041A\\u043E\\u0434\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 19\n    }\n  }, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0440\\u0435\\u0439\\u0441\\u043E\\u0432\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 19\n    }\n  }, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u044B\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 19\n    }\n  }, \"\\u041F\\u0443\\u043D\\u043A\\u0442\\u0443\\u0430\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u044C \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F (%)\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 19\n    }\n  }, \"\\u041F\\u0443\\u043D\\u043A\\u0442\\u0443\\u0430\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u044C \\u043F\\u0440\\u0438\\u0431\\u044B\\u0442\\u0438\\u044F (%)\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 15\n    }\n  }, filteredPunctuality.map((item, i) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 21\n    }\n  }, item.Авиакомпания), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 21\n    }\n  }, item.Код), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 21\n    }\n  }, item['Количество рейсов']), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 21\n    }\n  }, item.Отмены), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 21\n    }\n  }, item.Отправление.toFixed(1)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 21\n    }\n  }, item.Прибытие.toFixed(1)))))))), activeTab === 'airports' && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"airports-tab\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 13\n    }\n  }, \"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F \\u043F\\u043E \\u0430\\u044D\\u0440\\u043E\\u043F\\u043E\\u0440\\u0442\\u0430\\u043C\"), /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 19\n    }\n  }, \"IATA \\u043A\\u043E\\u0434\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 19\n    }\n  }, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0430\\u044D\\u0440\\u043E\\u043F\\u043E\\u0440\\u0442\\u0430\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 19\n    }\n  }, \"\\u0414\\u043E\\u043B\\u0433\\u043E\\u0442\\u0430\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 19\n    }\n  }, \"\\u0428\\u0438\\u0440\\u043E\\u0442\\u0430\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 19\n    }\n  }, \"\\u041A\\u043E\\u043B-\\u0432\\u043E \\u0432\\u044B\\u043B\\u0435\\u0442\\u043E\\u0432\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 19\n    }\n  }, \"\\u041A\\u043E\\u043B-\\u0432\\u043E \\u043F\\u0440\\u0438\\u043B\\u0435\\u0442\\u043E\\u0432\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 19\n    }\n  }, \"\\u0412\\u0441\\u0435\\u0433\\u043E \\u0440\\u0435\\u0439\\u0441\\u043E\\u0432\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 15\n    }\n  }, airports.map((airport, i) => {\n    var _airport$, _airport$2;\n\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 21\n      }\n    }, airport['IATA код']), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 21\n      }\n    }, airport['Название аэропорта']), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 21\n      }\n    }, (_airport$ = airport['Долгота']) === null || _airport$ === void 0 ? void 0 : _airport$.toFixed(4)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 21\n      }\n    }, (_airport$2 = airport['Широта']) === null || _airport$2 === void 0 ? void 0 : _airport$2.toFixed(4)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 21\n      }\n    }, airport['Кол-во вылетов']), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 21\n      }\n    }, airport['Кол-во прилетов']), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 21\n      }\n    }, (airport['Кол-во вылетов'] || 0) + (airport['Кол-во прилетов'] || 0)));\n  }))))), activeTab === 'analysis' && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"analysis-tab\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rules-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 13\n    }\n  }, \"\\uD83D\\uDCCA \\u0410\\u043D\\u0430\\u043B\\u0438\\u0437 \\u043F\\u0440\\u0430\\u0432\\u0438\\u043B \\u043E \\u0437\\u0430\\u0434\\u0435\\u0440\\u0436\\u043A\\u0430\\u0445 \\u0440\\u0435\\u0439\\u0441\\u043E\\u0432\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rules-grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 13\n    }\n  }, delayRules.map((rule, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: \"rule-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rule-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rule-number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 21\n    }\n  }, \"\\u041F\\u0440\\u0430\\u0432\\u0438\\u043B\\u043E #\", index + 1), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rule-lift\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 21\n    }\n  }, \"\\u041B\\u0438\\u0444\\u0442: \", rule.lift.toFixed(3))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rule-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"rule-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 21\n    }\n  }, rule.rule), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rule-stats\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"stat\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"stat-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 25\n    }\n  }, \"\\u041F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u043A\\u0430:\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"stat-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 25\n    }\n  }, rule.support.toFixed(3))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"stat\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"stat-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 25\n    }\n  }, \"\\u0414\\u043E\\u0441\\u0442\\u043E\\u0432\\u0435\\u0440\\u043D\\u043E\\u0441\\u0442\\u044C:\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"stat-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 25\n    }\n  }, rule.confidence.toFixed(3))))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"stats-grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 15\n    }\n  }, \"\\uD83D\\uDCC8 \\u0421\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430 \\u0437\\u0430\\u0434\\u0435\\u0440\\u0436\\u0435\\u043A\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"delay-stats\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 15\n    }\n  }, Object.entries(delayHistogram).map(([key, value]) => /*#__PURE__*/React.createElement(\"div\", {\n    key: key,\n    className: \"delay-stat\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"delay-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 21\n    }\n  }, key, \":\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"delay-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 21\n    }\n  }, value))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 15\n    }\n  }, \"\\uD83D\\uDD04 \\u041D\\u0430\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F \\u043F\\u0435\\u0440\\u0435\\u043B\\u0435\\u0442\\u043E\\u0432\"), flightDirections.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"directions-stats\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"direction-stat\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"direction-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 21\n    }\n  }, \"\\u0412\\u0441\\u0435\\u0433\\u043E \\u043D\\u0430\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0439:\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"direction-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 21\n    }\n  }, flightDirections.length)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"direction-stat\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"direction-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 21\n    }\n  }, \"\\u041F\\u0440\\u0438\\u043C\\u0435\\u0440 \\u043F\\u043E\\u043F\\u0443\\u043B\\u044F\\u0440\\u043D\\u043E\\u0433\\u043E:\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"direction-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 21\n    }\n  }, (_flightDirections$ = flightDirections[0]) === null || _flightDirections$ === void 0 ? void 0 : _flightDirections$.from, \" \\u2192 \", (_flightDirections$2 = flightDirections[0]) === null || _flightDirections$2 === void 0 ? void 0 : _flightDirections$2.to)))))));\n};\n\nexport default Dashboard;","map":{"version":3,"sources":["/Users/emiliamamedova/flight-1/src/components/Dashboard/Dashboard.jsx"],"names":["React","useState","useEffect","Bar","Doughnut","Pie","Chart","ChartJS","CategoryScale","LinearScale","BarElement","ArcElement","Title","Tooltip","Legend","PointElement","LineElement","register","Dashboard","topAirlines","setTopAirlines","airlinePunctuality","setAirlinePunctuality","airports","setAirports","delayHistogram","setDelayHistogram","cancellations","setCancellations","delayRules","setDelayRules","flightDirections","setFlightDirections","loading","setLoading","minFlights","setMinFlights","activeTab","setActiveTab","loadAllData","topResponse","punctualityResponse","airportsResponse","histogramResponse","cancellationsResponse","rulesResponse","directionsResponse","Promise","all","fetch","topData","json","punctualityData","airportsData","histogramData","cancellationsData","rulesData","directionsData","error","console","refreshRules","method","alert","topAirlinesChartData","labels","map","airline","airline_name","datasets","label","data","rating_departure","backgroundColor","borderColor","borderWidth","rating_arrival","delayHistogramChartData","cancellationsChartData","slice","item","airlines","filteredPunctuality","filter","punctualityChartData","Авиакомпания","Отправление","Прибытие","index","toFixed","responsive","plugins","legend","position","display","scales","x","ticks","maxRotation","minRotation","rule","support","confidence","lift","e","Number","target","value","y","min","max","title","text","i","Код","Отмены","airport","Object","entries","key","length","from","to"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Bar, Doughnut, Pie } from 'react-chartjs-2';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  ArcElement,\n  Title,\n  Tooltip,\n  Legend,\n  PointElement,\n  LineElement\n} from 'chart.js';\nimport './Dashboard.css';\n\n// Регистрируем компоненты Chart.js\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  ArcElement,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\nconst Dashboard = () => {\n  // Состояния для данных\n  const [topAirlines, setTopAirlines] = useState([]);\n  const [airlinePunctuality, setAirlinePunctuality] = useState([]);\n  const [airports, setAirports] = useState([]);\n  const [delayHistogram, setDelayHistogram] = useState({});\n  const [cancellations, setCancellations] = useState([]);\n  const [delayRules, setDelayRules] = useState([]);\n  const [flightDirections, setFlightDirections] = useState([]);\n  \n  // Состояния для загрузки и фильтров\n  const [loading, setLoading] = useState(true);\n  const [minFlights, setMinFlights] = useState(0);\n  const [activeTab, setActiveTab] = useState('overview');\n\n  // Загрузка данных при монтировании\n  useEffect(() => {\n    loadAllData();\n  }, []);\n\n  const loadAllData = async () => {\n    try {\n      setLoading(true);\n      \n      // Загружаем данные параллельно\n      const [\n        topResponse,\n        punctualityResponse,\n        airportsResponse,\n        histogramResponse,\n        cancellationsResponse,\n        rulesResponse,\n        directionsResponse\n      ] = await Promise.all([\n        fetch('/api/get_top3'),\n        fetch('/api/get_airline_punctuality'),\n        fetch('/api/get_airports'),\n        fetch('/api/delay_histogram'),\n        fetch('/api/cancellations_distribution'),\n        fetch('/api/delay-rules/top?top_n=10'),\n        fetch('/api/get_all_direction')\n      ]);\n\n      const topData = await topResponse.json();\n      const punctualityData = await punctualityResponse.json();\n      const airportsData = await airportsResponse.json();\n      const histogramData = await histogramResponse.json();\n      const cancellationsData = await cancellationsResponse.json();\n      const rulesData = await rulesResponse.json();\n      const directionsData = await directionsResponse.json();\n\n      setTopAirlines(topData);\n      setAirlinePunctuality(punctualityData);\n      setAirports(airportsData);\n      setDelayHistogram(histogramData[0] || {});\n      setCancellations(cancellationsData);\n      setDelayRules(rulesData);\n      setFlightDirections(directionsData);\n      \n    } catch (error) {\n      console.error('Error loading data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const refreshRules = async () => {\n    try {\n      await fetch('/api/delay-rules/refresh', { method: 'POST' });\n      alert('Анализ правил запущен. Обновите страницу через несколько минут.');\n    } catch (error) {\n      console.error('Error refreshing rules:', error);\n    }\n  };\n\n  // Подготовка данных для графиков\n  const topAirlinesChartData = {\n    labels: topAirlines.map(airline => airline.airline_name),\n    datasets: [\n      {\n        label: 'Рейтинг отправления',\n        data: topAirlines.map(airline => airline.rating_departure),\n        backgroundColor: 'rgba(54, 162, 235, 0.6)',\n        borderColor: 'rgba(54, 162, 235, 1)',\n        borderWidth: 1,\n      },\n      {\n        label: 'Рейтинг прибытия',\n        data: topAirlines.map(airline => airline.rating_arrival),\n        backgroundColor: 'rgba(75, 192, 192, 0.6)',\n        borderColor: 'rgba(75, 192, 192, 1)',\n        borderWidth: 1,\n      },\n    ],\n  };\n\n  const delayHistogramChartData = {\n    labels: ['0-10 минут', '11-20 минут', '21-30 минут', '31-120 минут', '>120 минут'],\n    datasets: [\n      {\n        label: 'Количество задержек',\n        data: [\n          delayHistogram['0-10 минут'] || 0,\n          delayHistogram['11-20 минут'] || 0,\n          delayHistogram['21-30 минут'] || 0,\n          delayHistogram['31-120 минут'] || 0,\n          delayHistogram['>120 минут'] || 0,\n        ],\n        backgroundColor: [\n          'rgba(75, 192, 192, 0.6)',\n          'rgba(54, 162, 235, 0.6)',\n          'rgba(255, 206, 86, 0.6)',\n          'rgba(255, 159, 64, 0.6)',\n          'rgba(255, 99, 132, 0.6)',\n        ],\n        borderColor: [\n          'rgba(75, 192, 192, 1)',\n          'rgba(54, 162, 235, 1)',\n          'rgba(255, 206, 86, 1)',\n          'rgba(255, 159, 64, 1)',\n          'rgba(255, 99, 132, 1)',\n        ],\n        borderWidth: 1,\n      },\n    ],\n  };\n\n  const cancellationsChartData = {\n    labels: cancellations.slice(0, 10).map(item => item.airlines),\n    datasets: [\n      {\n        label: 'Количество отмен',\n        data: cancellations.slice(0, 10).map(item => item.cancellations),\n        backgroundColor: 'rgba(255, 99, 132, 0.6)',\n        borderColor: 'rgba(255, 99, 132, 1)',\n        borderWidth: 1,\n      },\n    ],\n  };\n\n  // Фильтрация данных по количеству рейсов\n  const filteredPunctuality = airlinePunctuality.filter(\n    item => item['Количество рейсов'] >= minFlights\n  );\n\n  const punctualityChartData = {\n    labels: filteredPunctuality.map(item => item.Авиакомпания),\n    datasets: [\n      {\n        label: 'Пунктуальность отправления (%)',\n        data: filteredPunctuality.map(item => item.Отправление),\n        backgroundColor: 'rgba(54, 162, 235, 0.6)',\n      },\n      {\n        label: 'Пунктуальность прибытия (%)',\n        data: filteredPunctuality.map(item => item.Прибытие),\n        backgroundColor: 'rgba(75, 192, 192, 0.6)',\n      },\n    ],\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Загрузка данных...</div>;\n  }\n\n  return (\n    <div className=\"dashboard\">\n      <header className=\"dashboard-header\">\n        <h1>📊 Аналитика пунктуальности авиакомпаний</h1>\n        <div className=\"header-controls\">\n          <button onClick={loadAllData} className=\"refresh-btn\">\n            🔄 Обновить данные\n          </button>\n          <button onClick={refreshRules} className=\"refresh-rules-btn\">\n            🔄 Обновить правила задержек\n          </button>\n        </div>\n      </header>\n\n      <nav className=\"tabs\">\n        <button \n          className={activeTab === 'overview' ? 'active' : ''}\n          onClick={() => setActiveTab('overview')}\n        >\n          Обзор\n        </button>\n        <button \n          className={activeTab === 'airlines' ? 'active' : ''}\n          onClick={() => setActiveTab('airlines')}\n        >\n          Авиакомпании\n        </button>\n        <button \n          className={activeTab === 'airports' ? 'active' : ''}\n          onClick={() => setActiveTab('airports')}\n        >\n          Аэропорты\n        </button>\n        <button \n          className={activeTab === 'analysis' ? 'active' : ''}\n          onClick={() => setActiveTab('analysis')}\n        >\n          Анализ задержек\n        </button>\n      </nav>\n\n      {activeTab === 'overview' && (\n        <div className=\"overview-tab\">\n          <div className=\"cards-grid\">\n            <div className=\"card\">\n              <h3>🏆 Топ-3 авиакомпании</h3>\n              <div className=\"top-airlines\">\n                {topAirlines.map((airline, index) => (\n                  <div key={index} className=\"top-airline-item\">\n                    <span className=\"rank\">#{index + 1}</span>\n                    <span className=\"airline-name\">{airline.airline_name}</span>\n                    <div className=\"ratings\">\n                      <span className=\"rating departure\">✈️ {airline.rating_departure.toFixed(1)}</span>\n                      <span className=\"rating arrival\">🛬 {airline.rating_arrival.toFixed(1)}</span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            <div className=\"card\">\n              <h3>📈 Распределение задержек</h3>\n              <div className=\"chart-container\">\n                <Doughnut\n                  data={delayHistogramChartData}\n                  options={{\n                    responsive: true,\n                    plugins: {\n                      legend: { position: 'bottom' },\n                    },\n                  }}\n                />\n              </div>\n            </div>\n\n            <div className=\"card\">\n              <h3>❌ Топ-10 по отменам рейсов</h3>\n              <div className=\"chart-container\">\n                <Bar\n                  data={cancellationsChartData}\n                  options={{\n                    responsive: true,\n                    plugins: {\n                      legend: { display: false },\n                    },\n                    scales: {\n                      x: {\n                        ticks: {\n                          maxRotation: 45,\n                          minRotation: 45,\n                        },\n                      },\n                    },\n                  }}\n                />\n              </div>\n            </div>\n\n            <div className=\"card full-width\">\n              <h3>📝 Топ-5 правил о задержках</h3>\n              <div className=\"rules-list\">\n                {delayRules.slice(0, 5).map((rule, index) => (\n                  <div key={index} className=\"rule-item\">\n                    <div className=\"rule-text\">{rule.rule}</div>\n                    <div className=\"rule-metrics\">\n                      <span className=\"metric\">Поддержка: {rule.support.toFixed(3)}</span>\n                      <span className=\"metric\">Достоверность: {rule.confidence.toFixed(3)}</span>\n                      <span className=\"metric\">Лифт: {rule.lift.toFixed(3)}</span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {activeTab === 'airlines' && (\n        <div className=\"airlines-tab\">\n          <div className=\"filter-controls\">\n            <label>\n              Минимальное количество рейсов для отображения:\n              <input\n                type=\"range\"\n                min=\"0\"\n                max=\"5000\"\n                value={minFlights}\n                onChange={(e) => setMinFlights(Number(e.target.value))}\n              />\n              <span>{minFlights}</span>\n            </label>\n          </div>\n\n          <div className=\"chart-container large\">\n            <Bar\n              data={punctualityChartData}\n              options={{\n                responsive: true,\n                plugins: {\n                  legend: { position: 'top' },\n                },\n                scales: {\n                  y: {\n                    min: 0,\n                    max: 100,\n                    title: { display: true, text: 'Пунктуальность (%)' },\n                  },\n                  x: {\n                    ticks: {\n                      maxRotation: 90,\n                      minRotation: 45,\n                    },\n                  },\n                },\n              }}\n            />\n          </div>\n\n          <div className=\"table-container\">\n            <h3>Детальная информация по авиакомпаниям</h3>\n            <table>\n              <thead>\n                <tr>\n                  <th>Авиакомпания</th>\n                  <th>Код</th>\n                  <th>Количество рейсов</th>\n                  <th>Отмены</th>\n                  <th>Пунктуальность отправления (%)</th>\n                  <th>Пунктуальность прибытия (%)</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredPunctuality.map((item, i) => (\n                  <tr key={i}>\n                    <td>{item.Авиакомпания}</td>\n                    <td>{item.Код}</td>\n                    <td>{item['Количество рейсов']}</td>\n                    <td>{item.Отмены}</td>\n                    <td>{item.Отправление.toFixed(1)}</td>\n                    <td>{item.Прибытие.toFixed(1)}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {activeTab === 'airports' && (\n        <div className=\"airports-tab\">\n          <div className=\"table-container\">\n            <h3>Информация по аэропортам</h3>\n            <table>\n              <thead>\n                <tr>\n                  <th>IATA код</th>\n                  <th>Название аэропорта</th>\n                  <th>Долгота</th>\n                  <th>Широта</th>\n                  <th>Кол-во вылетов</th>\n                  <th>Кол-во прилетов</th>\n                  <th>Всего рейсов</th>\n                </tr>\n              </thead>\n              <tbody>\n                {airports.map((airport, i) => (\n                  <tr key={i}>\n                    <td>{airport['IATA код']}</td>\n                    <td>{airport['Название аэропорта']}</td>\n                    <td>{airport['Долгота']?.toFixed(4)}</td>\n                    <td>{airport['Широта']?.toFixed(4)}</td>\n                    <td>{airport['Кол-во вылетов']}</td>\n                    <td>{airport['Кол-во прилетов']}</td>\n                    <td>\n                      {(airport['Кол-во вылетов'] || 0) + (airport['Кол-во прилетов'] || 0)}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {activeTab === 'analysis' && (\n        <div className=\"analysis-tab\">\n          <div className=\"rules-section\">\n            <h3>📊 Анализ правил о задержках рейсов</h3>\n            <div className=\"rules-grid\">\n              {delayRules.map((rule, index) => (\n                <div key={index} className=\"rule-card\">\n                  <div className=\"rule-header\">\n                    <span className=\"rule-number\">Правило #{index + 1}</span>\n                    <span className=\"rule-lift\">Лифт: {rule.lift.toFixed(3)}</span>\n                  </div>\n                  <div className=\"rule-content\">\n                    <p className=\"rule-text\">{rule.rule}</p>\n                    <div className=\"rule-stats\">\n                      <div className=\"stat\">\n                        <span className=\"stat-label\">Поддержка:</span>\n                        <span className=\"stat-value\">{rule.support.toFixed(3)}</span>\n                      </div>\n                      <div className=\"stat\">\n                        <span className=\"stat-label\">Достоверность:</span>\n                        <span className=\"stat-value\">{rule.confidence.toFixed(3)}</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"stats-grid\">\n            <div className=\"card\">\n              <h3>📈 Статистика задержек</h3>\n              <div className=\"delay-stats\">\n                {Object.entries(delayHistogram).map(([key, value]) => (\n                  <div key={key} className=\"delay-stat\">\n                    <span className=\"delay-label\">{key}:</span>\n                    <span className=\"delay-value\">{value}</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            <div className=\"card\">\n              <h3>🔄 Направления перелетов</h3>\n              {flightDirections.length > 0 && (\n                <div className=\"directions-stats\">\n                  <div className=\"direction-stat\">\n                    <span className=\"direction-label\">Всего направлений:</span>\n                    <span className=\"direction-value\">{flightDirections.length}</span>\n                  </div>\n                  <div className=\"direction-stat\">\n                    <span className=\"direction-label\">Пример популярного:</span>\n                    <span className=\"direction-value\">\n                      {flightDirections[0]?.from} → {flightDirections[0]?.to}\n                    </span>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}