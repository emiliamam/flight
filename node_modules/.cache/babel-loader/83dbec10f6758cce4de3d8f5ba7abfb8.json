{"ast":null,"code":"import React, { useState, useMemo } from 'react';\nimport { Pie } from 'react-chartjs-2';\n\nconst DirectionsChart = () => {// const [displayCount, setDisplayCount] = useState(10);\n  // const sortedDirections = useMemo(() => {\n  //   return [...directionData]\n  //     .sort((a, b) => b.total_flights - a.total_flights)\n  //     .slice(0, displayCount);\n  // }, [directionData, displayCount]);\n  // const pieData = useMemo(() => {\n  //   return {\n  //     labels: sortedDirections.map(d => `${d.airport1} → ${d.airport2}`),\n  //     datasets: [\n  //       {\n  //         data: sortedDirections.map(d => d.total_flights),\n  //         backgroundColor: sortedDirections.map(\n  //           (_, i) => `hsl(${(i * 360) / displayCount}, 70%, 60%)`\n  //         ),\n  //       },\n  //     ],\n  //   };\n  // }, [sortedDirections, displayCount]);\n  // return (\n  //   <div style={{ padding: 20 }}>\n  //     <h2 style={{ textAlign: 'center' }}>\n  //       Анализ направлений рейсов\n  //     </h2>\n  //     <div style={{ textAlign: 'center', padding: 20 }}>\n  //       <input\n  //         type=\"range\"\n  //         min={1}\n  //         max={Math.min(100, directionData.length)}\n  //         value={displayCount}\n  //         onChange={e => setDisplayCount(Number(e.target.value))}\n  //         style={{ width: 300 }}\n  //       />\n  //       <div>{displayCount} направлений</div>\n  //     </div>\n  //     <div style={{ overflowX: 'auto', marginBottom: 30 }}>\n  //       <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n  //         <thead style={{ backgroundColor: '#f0f0f0' }}>\n  //           <tr>\n  //             <th style={thStyle}>Направление</th>\n  //             <th style={thStyle}>Рейсов</th>\n  //             <th style={thStyle}>Пунктуальность (%)</th>\n  //             <th style={thStyle}>Ср. задержка (мин)</th>\n  //             <th style={thStyle}>Без отправления</th>\n  //           </tr>\n  //         </thead>\n  //         <tbody>\n  //           {sortedDirections.map((d, i) => (\n  //             <tr key={i} style={{ textAlign: 'center' }}>\n  //               <td style={tdStyle}>{d.airport1} → {d.airport2}</td>\n  //               <td style={tdStyle}>{d.total_flights}</td>\n  //               <td style={tdStyle}>{d.on_time_percentage}</td>\n  //               <td style={tdStyle}>{d.avg_delay_minutes}</td>\n  //               <td style={tdStyle}>{d.missing_departure_count}</td>\n  //             </tr>\n  //           ))}\n  //         </tbody>\n  //       </table>\n  //     </div>\n  //     <div style={{ height: 500 }}>\n  //       <Pie\n  //         data={pieData}\n  //         options={{\n  //           responsive: true,\n  //           maintainAspectRatio: false,\n  //           plugins: {\n  //             tooltip: {\n  //               callbacks: {\n  //                 label: (context) => {\n  //                   const dir = sortedDirections[context.dataIndex];\n  //                   return `${context.label}: ${context.formattedValue} рейсов — пунктуальность ${dir.on_time_percentage}%`;\n  //                 }\n  //               }\n  //             }\n  //           }\n  //         }}\n  //       />\n  //     </div>\n  //   </div>\n  // );\n};\n\nconst thStyle = {\n  padding: '8px 12px',\n  border: '1px solid #ccc',\n  fontWeight: 'bold'\n};\nconst tdStyle = {\n  padding: '8px 12px',\n  border: '1px solid #ddd'\n};\nexport default DirectionsChart;","map":{"version":3,"sources":["/Users/emiliamamedova/flight-1/src/components/Chart/DirectionCharts/DirectionsCharts.jsx"],"names":["React","useState","useMemo","Pie","DirectionsChart","thStyle","padding","border","fontWeight","tdStyle"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,OAA1B,QAAyC,OAAzC;AACA,SAASC,GAAT,QAAoB,iBAApB;;AAEA,MAAMC,eAAe,GAAG,MAAM,CAC5B;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,CArFD;;AAuFA,MAAMC,OAAO,GAAG;AACdC,EAAAA,OAAO,EAAE,UADK;AAEdC,EAAAA,MAAM,EAAE,gBAFM;AAGdC,EAAAA,UAAU,EAAE;AAHE,CAAhB;AAMA,MAAMC,OAAO,GAAG;AACdH,EAAAA,OAAO,EAAE,UADK;AAEdC,EAAAA,MAAM,EAAE;AAFM,CAAhB;AAKA,eAAeH,eAAf","sourcesContent":["import React, { useState, useMemo } from 'react';\nimport { Pie } from 'react-chartjs-2';\n\nconst DirectionsChart = () => {\n  // const [displayCount, setDisplayCount] = useState(10);\n\n  // const sortedDirections = useMemo(() => {\n  //   return [...directionData]\n  //     .sort((a, b) => b.total_flights - a.total_flights)\n  //     .slice(0, displayCount);\n  // }, [directionData, displayCount]);\n\n  // const pieData = useMemo(() => {\n  //   return {\n  //     labels: sortedDirections.map(d => `${d.airport1} → ${d.airport2}`),\n  //     datasets: [\n  //       {\n  //         data: sortedDirections.map(d => d.total_flights),\n  //         backgroundColor: sortedDirections.map(\n  //           (_, i) => `hsl(${(i * 360) / displayCount}, 70%, 60%)`\n  //         ),\n  //       },\n  //     ],\n  //   };\n  // }, [sortedDirections, displayCount]);\n\n  // return (\n  //   <div style={{ padding: 20 }}>\n  //     <h2 style={{ textAlign: 'center' }}>\n  //       Анализ направлений рейсов\n  //     </h2>\n  //     <div style={{ textAlign: 'center', padding: 20 }}>\n  //       <input\n  //         type=\"range\"\n  //         min={1}\n  //         max={Math.min(100, directionData.length)}\n  //         value={displayCount}\n  //         onChange={e => setDisplayCount(Number(e.target.value))}\n  //         style={{ width: 300 }}\n  //       />\n  //       <div>{displayCount} направлений</div>\n  //     </div>\n  //     <div style={{ overflowX: 'auto', marginBottom: 30 }}>\n  //       <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n  //         <thead style={{ backgroundColor: '#f0f0f0' }}>\n  //           <tr>\n  //             <th style={thStyle}>Направление</th>\n  //             <th style={thStyle}>Рейсов</th>\n  //             <th style={thStyle}>Пунктуальность (%)</th>\n  //             <th style={thStyle}>Ср. задержка (мин)</th>\n  //             <th style={thStyle}>Без отправления</th>\n  //           </tr>\n  //         </thead>\n  //         <tbody>\n  //           {sortedDirections.map((d, i) => (\n  //             <tr key={i} style={{ textAlign: 'center' }}>\n  //               <td style={tdStyle}>{d.airport1} → {d.airport2}</td>\n  //               <td style={tdStyle}>{d.total_flights}</td>\n  //               <td style={tdStyle}>{d.on_time_percentage}</td>\n  //               <td style={tdStyle}>{d.avg_delay_minutes}</td>\n  //               <td style={tdStyle}>{d.missing_departure_count}</td>\n  //             </tr>\n  //           ))}\n  //         </tbody>\n  //       </table>\n  //     </div>\n\n  //     <div style={{ height: 500 }}>\n  //       <Pie\n  //         data={pieData}\n  //         options={{\n  //           responsive: true,\n  //           maintainAspectRatio: false,\n  //           plugins: {\n  //             tooltip: {\n  //               callbacks: {\n  //                 label: (context) => {\n  //                   const dir = sortedDirections[context.dataIndex];\n  //                   return `${context.label}: ${context.formattedValue} рейсов — пунктуальность ${dir.on_time_percentage}%`;\n  //                 }\n  //               }\n  //             }\n  //           }\n  //         }}\n  //       />\n  //     </div>\n  //   </div>\n  // );\n};\n\nconst thStyle = {\n  padding: '8px 12px',\n  border: '1px solid #ccc',\n  fontWeight: 'bold',\n};\n\nconst tdStyle = {\n  padding: '8px 12px',\n  border: '1px solid #ddd',\n};\n\nexport default DirectionsChart;\n"]},"metadata":{},"sourceType":"module"}