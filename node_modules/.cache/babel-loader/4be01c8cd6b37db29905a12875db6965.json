{"ast":null,"code":"var _jsxFileName = \"/Users/emiliamamedova/flight-1/src/components/Chart/DirectionCharts/DirectionsCharts.jsx\";\nimport React, { useState, useMemo } from 'react';\nimport { Pie } from 'react-chartjs-2';\n\nconst DirectionsChart = () => {\n  const [displayCount, setDisplayCount] = useState(10);\n  const sortedDirections = useMemo(() => {\n    return [...directionData].sort((a, b) => b.total_flights - a.total_flights).slice(0, displayCount);\n  }, [directionData, displayCount]);\n  const pieData = useMemo(() => {\n    return {\n      labels: sortedDirections.map(d => `${d.airport1} → ${d.airport2}`),\n      datasets: [{\n        data: sortedDirections.map(d => d.total_flights),\n        backgroundColor: sortedDirections.map((_, i) => `hsl(${i * 360 / displayCount}, 70%, 60%)`)\n      }]\n    };\n  }, [sortedDirections, displayCount]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }\n  }, \"\\u0410\\u043D\\u0430\\u043B\\u0438\\u0437 \\u043D\\u0430\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0439 \\u0440\\u0435\\u0439\\u0441\\u043E\\u0432\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: 'center',\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"range\",\n    min: 1,\n    max: Math.min(100, directionData.length),\n    value: displayCount,\n    onChange: e => setDisplayCount(Number(e.target.value)),\n    style: {\n      width: 300\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, displayCount, \" \\u043D\\u0430\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0439\")), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      overflowX: 'auto',\n      marginBottom: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    style: {\n      width: '100%',\n      borderCollapse: 'collapse'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    style: {\n      backgroundColor: '#f0f0f0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    style: thStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 15\n    }\n  }, \"\\u041D\\u0430\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: thStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 15\n    }\n  }, \"\\u0420\\u0435\\u0439\\u0441\\u043E\\u0432\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: thStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 15\n    }\n  }, \"\\u041F\\u0443\\u043D\\u043A\\u0442\\u0443\\u0430\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u044C (%)\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: thStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 15\n    }\n  }, \"\\u0421\\u0440. \\u0437\\u0430\\u0434\\u0435\\u0440\\u0436\\u043A\\u0430 (\\u043C\\u0438\\u043D)\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: thStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 15\n    }\n  }, \"\\u0411\\u0435\\u0437 \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }, sortedDirections.map((d, i) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: i,\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    style: tdStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, d.airport1, \" \\u2192 \", d.airport2), /*#__PURE__*/React.createElement(\"td\", {\n    style: tdStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }, d.total_flights), /*#__PURE__*/React.createElement(\"td\", {\n    style: tdStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, d.on_time_percentage), /*#__PURE__*/React.createElement(\"td\", {\n    style: tdStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }\n  }, d.avg_delay_minutes), /*#__PURE__*/React.createElement(\"td\", {\n    style: tdStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, d.missing_departure_count)))))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: 500\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Pie, {\n    data: pieData,\n    options: {\n      responsive: true,\n      maintainAspectRatio: false,\n      plugins: {\n        tooltip: {\n          callbacks: {\n            label: context => {\n              const dir = sortedDirections[context.dataIndex];\n              return `${context.label}: ${context.formattedValue} рейсов — пунктуальность ${dir.on_time_percentage}%`;\n            }\n          }\n        }\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  })));\n};\n\nconst thStyle = {\n  padding: '8px 12px',\n  border: '1px solid #ccc',\n  fontWeight: 'bold'\n};\nconst tdStyle = {\n  padding: '8px 12px',\n  border: '1px solid #ddd'\n};\nexport default DirectionsChart;","map":{"version":3,"sources":["/Users/emiliamamedova/flight-1/src/components/Chart/DirectionCharts/DirectionsCharts.jsx"],"names":["React","useState","useMemo","Pie","DirectionsChart","displayCount","setDisplayCount","sortedDirections","directionData","sort","a","b","total_flights","slice","pieData","labels","map","d","airport1","airport2","datasets","data","backgroundColor","_","i","padding","textAlign","Math","min","length","e","Number","target","value","width","overflowX","marginBottom","borderCollapse","thStyle","tdStyle","on_time_percentage","avg_delay_minutes","missing_departure_count","height","responsive","maintainAspectRatio","plugins","tooltip","callbacks","label","context","dir","dataIndex","formattedValue","border","fontWeight"],"mappings":"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","sourcesContent":["import React, { useState, useMemo } from 'react';\nimport { Pie } from 'react-chartjs-2';\n\nconst DirectionsChart = () => {\n  const [displayCount, setDisplayCount] = useState(10);\n\n  const sortedDirections = useMemo(() => {\n    return [...directionData]\n      .sort((a, b) => b.total_flights - a.total_flights)\n      .slice(0, displayCount);\n  }, [directionData, displayCount]);\n\n  const pieData = useMemo(() => {\n    return {\n      labels: sortedDirections.map(d => `${d.airport1} → ${d.airport2}`),\n      datasets: [\n        {\n          data: sortedDirections.map(d => d.total_flights),\n          backgroundColor: sortedDirections.map(\n            (_, i) => `hsl(${(i * 360) / displayCount}, 70%, 60%)`\n          ),\n        },\n      ],\n    };\n  }, [sortedDirections, displayCount]);\n\n  return (\n    <div style={{ padding: 20 }}>\n      <h2 style={{ textAlign: 'center' }}>\n        Анализ направлений рейсов\n      </h2>\n      <div style={{ textAlign: 'center', padding: 20 }}>\n        <input\n          type=\"range\"\n          min={1}\n          max={Math.min(100, directionData.length)}\n          value={displayCount}\n          onChange={e => setDisplayCount(Number(e.target.value))}\n          style={{ width: 300 }}\n        />\n        <div>{displayCount} направлений</div>\n      </div>\n      <div style={{ overflowX: 'auto', marginBottom: 30 }}>\n        <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n          <thead style={{ backgroundColor: '#f0f0f0' }}>\n            <tr>\n              <th style={thStyle}>Направление</th>\n              <th style={thStyle}>Рейсов</th>\n              <th style={thStyle}>Пунктуальность (%)</th>\n              <th style={thStyle}>Ср. задержка (мин)</th>\n              <th style={thStyle}>Без отправления</th>\n            </tr>\n          </thead>\n          <tbody>\n            {sortedDirections.map((d, i) => (\n              <tr key={i} style={{ textAlign: 'center' }}>\n                <td style={tdStyle}>{d.airport1} → {d.airport2}</td>\n                <td style={tdStyle}>{d.total_flights}</td>\n                <td style={tdStyle}>{d.on_time_percentage}</td>\n                <td style={tdStyle}>{d.avg_delay_minutes}</td>\n                <td style={tdStyle}>{d.missing_departure_count}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      <div style={{ height: 500 }}>\n        <Pie\n          data={pieData}\n          options={{\n            responsive: true,\n            maintainAspectRatio: false,\n            plugins: {\n              tooltip: {\n                callbacks: {\n                  label: (context) => {\n                    const dir = sortedDirections[context.dataIndex];\n                    return `${context.label}: ${context.formattedValue} рейсов — пунктуальность ${dir.on_time_percentage}%`;\n                  }\n                }\n              }\n            }\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nconst thStyle = {\n  padding: '8px 12px',\n  border: '1px solid #ccc',\n  fontWeight: 'bold',\n};\n\nconst tdStyle = {\n  padding: '8px 12px',\n  border: '1px solid #ddd',\n};\n\nexport default DirectionsChart;\n"]},"metadata":{},"sourceType":"module"}